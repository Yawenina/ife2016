<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task 14</title>
</head>
<body>
    <h3>污染城市列表</h3>
    <ul id="aqi-list">
        <!--
            <li>第一名：福州（样例），10</li>
              <li>第二名：福州（样例），10</li> -->
    </ul>

    <script>
        var aqiData = [
            ["北京", 90],
            ["上海", 50],
            ["福州", 10],
            ["广州", 50],
            ["成都", 80],
            ["西安", 100]
        ];

        function renderFilteredData() {
            var ul = document.getElementById("aqi-list");

            function compare(arr1, arr2){
                return arr1[1] - arr2[1];
            }
            //先筛选再排序
            var sortedAqiData = aqiData.filter(function(item){
                return item[1] > 60;
            }).sort(compare);

            //将排序结果插入文档片段
            var fragment = document.createDocumentFragment();
            for(var i = 0, len = sortedAqiData.length; i < len; i++){
                var li = document.createElement("li");
                var item = sortedAqiData[i];
                var text = "第" + (i+1) + "名：" + item[0] + ", " + item[1];
                li.textContent = text;
                fragment.appendChild(li);
            }

            //将文档片段插入文档
            ul.appendChild(fragment);
        }

        window.addEventListener('load', renderFilteredData);
    </script>
</body>
</html>