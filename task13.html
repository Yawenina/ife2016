<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task 13</title>
</head>
<body>
    <label>请输入北京今天空气质量：<input id="aqi-input" type="text"></label>
    <button id="button">确认填写</button>

    <div>您输入的值是：<span id="aqi-display">尚无录入</span></div>

    <script>
        (function() {

            function $(id) {
              return document.getElementById(id);
            }

            var input = $("aqi-input"),
                    btn = $("button"),
                    text = $("aqi-display");

            //事件处理程序
            function showAQI(){
                //parseInt 能保证结果为number且能在该情景下能防止xss攻击；
                let value = parseInt(input.value);
                if (!isNaN(value) && (value >= 0 && value <=500)) {
                  text.textContent = value;
                } else {
                  alert('请输入正确类型的值！');
                  input.value = '';
                }
            }

            function inputHandler(e) {
              if(e.keyCode === 13){
                showAQI();
              }
            }

            btn.addEventListener("click", showAQI);
            input.addEventListener("keyup", inputHandler);

        })();
    </script>
</body>
</html>